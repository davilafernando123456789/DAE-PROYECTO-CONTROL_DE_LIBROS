{% extends './base.html' %}

{% block title %}Lista de libros{% endblock %}

{% block body %}
<div class="container">
    <div class="row">   
        <div class="container">
            <div class="input-group">
                <input type="text" id="titulo_libro" class="form-control" placeholder="Ingrese el título del libro">
                <button id="buscar_libro" class="btn btn-primary">Buscar</button>
            </div>
        </div>
        
        <div class="mt-3"></div> 
        <div class="row">   
        <table class="table table-dark table-sm">
            <thead>
                <tr>
                    <th>Código</th>
                    <th>Título</th>
                    <th>Autor</th>
                    <th>Disponibilidad</th>
                </tr>
            </thead>
            <tbody>
                {% for libro in libros %}
                <tr>
                    <td>{{ libro.IdLibro }}</td>
                    <td>{{ libro.Titulo }}</td>
                    <td>{{ libro.Autor }}</td>
                    <td>
                        {% if libro.Disponibilidad %}
                            Disponible
                        {% else %}
                            No disponible
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
    </div>
</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#titulo_libro').on('input', function() {
                var query = $(this).val().toLowerCase(); // Obtener el valor ingresado y convertirlo a minúsculas
                $('.table tbody tr').hide(); // Ocultar todas las filas de la tabla
    
                // Filtrar las filas de la tabla que coinciden con el título del libro ingresado
                $('.table tbody tr').each(function() {
                    var titulo = $(this).find('td:eq(1)').text().toLowerCase(); // Obtener el título del libro de la fila actual
                    if (titulo.includes(query)) {
                        $(this).show(); // Mostrar la fila si el título coincide con la búsqueda
                    }
                });
            });
        });
    </script>
    
</div>
{% endblock %}
